<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>{{=response.title or request.application}} | Log in</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="{{=URL('static','plugin_AdminLTE/bower_components/bootstrap/dist/css/bootstrap.min.css')}}">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{{=URL('static','plugin_AdminLTE/bower_components/font-awesome/css/font-awesome.min.css')}}">
  <!-- Ionicons -->
  <link rel="stylesheet" href="{{=URL('static','plugin_AdminLTE/bower_components/Ionicons/css/ionicons.min.css')}}">
  <!-- Theme style -->
  <link rel="stylesheet" href="{{=URL('static','plugin_AdminLTE/dist/css/AdminLTE.min.css')}}">
  <!-- iCheck -->
  <link rel="stylesheet" href="{{=URL('static','plugin_AdminLTE/plugins/iCheck/square/blue.css')}}">
  <link rel="stylesheet" href="{{=URL('static','plugin_AdminLTE/plugins/iCheck/line/red.css')}}">
  <link rel="stylesheet" href="{{=URL('static','plugin_AdminLTE/plugins/iCheck/line/green.css')}}">
  
  <!-- include custom stylesheets -->
  <link rel="stylesheet" href="{{=URL('static','plugin_os-css/openstudio_login.css')}}"/>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<body class="hold-transition login-page">
<div class="login-box">
  <div class="login-logo">
    {{=logo_login}}
  </div>
  <!-- /.login-logo -->
  <div class="login-box-body">
    <p class="login-box-msg">
              {{ if response.flash: }}
        <div class="alert alert-info alert-dismissible">
            {{=response.flash or ''}}
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
        </div> {{ pass }}
        {{=company_name}}</p>
        {{=form}}
    <div class="social-auth-links">
        {{=reset_passwd}}<br>
        {{=register}} 
    </div>

  </div>
  <!-- /.login-box-body -->
</div>
<!-- /.login-box -->

<!-- jQuery 3 -->
<script src="{{=URL('static','plugin_AdminLTE/bower_components/jquery/dist/jquery.min.js')}}"></script>
<!-- Bootstrap 3.3.7 -->
<script src="{{=URL('static','plugin_AdminLTE/bower_components/bootstrap/dist/js/bootstrap.min.js')}}"></script>
<!-- iCheck -->
<script src="{{=URL('static','plugin_AdminLTE/plugins/iCheck/icheck.min.js')}}"></script>
<script>
  $(function () {
    $('input.iCheck').iCheck({
      checkboxClass: 'icheckbox_square-blue',
      radioClass: 'iradio_square-blue',
      inheritID: true,
      increaseArea: '10%' // optional
    });
  });
  
  $('input.iCheck-line-red').each(function(){
      var self = $(this),
      label = self.next(),
      label_text = label.text();

      label.remove();
    
      self.iCheck({
        checkboxClass: 'icheckbox_line-red',
        radioClass: 'iradio_line-red',
        inheritID: true,
        insert: '<div class="icheck_line-icon"></div>' + label_text,
        increaseArea: '10%' // optional
    });
  });

</script>

<!-- only allow registering when required boxes are checked -->
{{if request.args(0)=='register' and has_organization and has_terms and has_privacy_policy:}}
<script language="javascript"><!--
  $submit = $('input[type=submit]');
  var accepted_terms = false;
  var accepted_privacy = false;
  
  $(document).ready(function() {
      $submit.prop('disabled', true);
  });
  
  var $cbox_terms = $('#accept_terms_and_conditions');
  $cbox_terms.on('ifChanged', function(event){
    accept_checkbox_handler($(this), 'terms');
  });
    
  var $cbox_privacy = $('#accept_privacy_policy');
  $cbox_privacy.on('ifChanged', function(event){
    accept_checkbox_handler($(this), 'privacy');
  });
    
  function accept_checkbox_handler(element, which_box) {
    element.parent().toggleClass('icheckbox_line-red');
    element.parent().toggleClass('icheckbox_line-green');
    
    if (which_box == 'terms') {
      accepted_terms = !accepted_terms;
    } else {
      accepted_privacy = !accepted_privacy;
    }
    
    if (accepted_terms && accepted_privacy) {
      $submit.prop('disabled', false);
    } else {
      $submit.prop('disabled', true);
    }
  }
    
//--></script>
{{pass}}

<!-- Google Analytics -->
{{ if response.google_analytics_id: }}
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', '{{=response.google_analytics_id}}', 'auto');
      ga('send', 'pageview');

    </script>
{{ pass }}

</body>
</html>
